<!DOCTYPE html>
<html lang="en" manifest="3things.appcache">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width"/>
    <title>Three Things</title>
    <script type="text/javascript" charset="utf-8" src="js/index.js"></script>
    <link rel="stylesheet" href="3things.css" charset="utf-8">
    <script>
  		var counter = 1;

  		appCacheLog = function() {
  		    var message = Array.prototype.join.call(arguments, " ");
  		    console.log(message);
          return;
  		}

  		// log each of the events fired by window.applicationCache
  		window.applicationCache.onchecking = function(e) {
  		    appCacheLog("Checking for updates");
  		}

  		window.applicationCache.onnoupdate = function(e) {
  		    appCacheLog("No updates found");
  		}

  		window.applicationCache.onupdateready = function(e) {
  		    appCacheLog("Update complete");
  		}

  		window.applicationCache.onobsolete = function(e) {
  		    appCacheLog("Cache obsolete");
  		}

  		window.applicationCache.ondownloading = function(e) {
  		    appCacheLog("Downloading updates");
  		}

  		window.applicationCache.oncached = function(e) {
  		    appCacheLog("Cached");
  		}

  		window.applicationCache.onerror = function(e) {
  		    appCacheLog("ApplicationCache error");
  		}

  		window.applicationCache.onprogress = function(e) {
  		    appCacheLog("Progress: downloaded file " + counter);
  		    counter++;
  		}

  		window.addEventListener("online", function(e) {
  		    appCacheLog("You are online");
  		}, true);

  		window.addEventListener("offline", function(e) {
  		    appCacheLog("You are offline");
  		}, true);

  		// Convert applicationCache status codes into messages
  		showCacheStatus = function(n) {
  		    statusMessages = ["Uncached","Idle","Checking","Downloading","Update Ready","Obsolete"];
  		    return statusMessages[n];
  		}

  		onload = function(e) {
  		    // Check for required browser features
  		    if (!window.applicationCache) {
  		        appCacheLog("HTML5 offline web applications (ApplicationCache) are not supported in your browser.");
  		        return;
  		    }

  		    appCacheLog("Initial AppCache status: " + showCacheStatus(window.applicationCache.status));

  		}

      console.log("HELLO!");
    </script>
  </head>
  <body>

    <main>
      <section id="section_today">
        <header>
          <h1>What three things do I need to do today?</h1>
        </header>

        <ol id="today_things">
          <li id="thing_1"><input type="checkbox" id="first_status"><textarea id="first_text" class="thing_text" rows="1" placeholder="First Thing"></textarea></li>
          <li id="thing_2"><input type="checkbox" id="second_status"><textarea id="second_text" class="thing_text" rows="1" placeholder="Second Thing"></textarea></li>
          <li id="thing_3"><input type="checkbox" id="third_status"><textarea id="third_text" class="thing_text" rows="1" placeholder="Third Thing"></textarea></li>
        </ol>
      </section>

      <section id="firefox_warning" class="warning">
        <p>Welcome, Firefox user!</p>
        <p>Unfortunately, Firefox <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=591737">does not support</a> the HTML5 elements <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code>, so Three Things is gonna look funky.</p>
        <p>You may wish to consider using <a href="help.html#recommended-browsers">a different browser</a> for Three Things.</p>
        <button id="button_dismiss_firefox_warning">OK, got it</button>
      </section>

      <section id="ie_warning" class="warning">
        <p>Welcome, Internet Explorer user!</p>
        <p>Unfortunately, Internet Explorer <a href="http://caniuse.com/details">does not support</a> the HTML5 elements <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code>, so Three Things is gonna look funky.</p>
        <p>You may wish to consider using <a href="help.html#recommended-browsers">a different browser</a> for Three Things.</p>
        <button id="button_dismiss_ie_warning">OK, got it</button>
      </section>

      <details id="prior">
        <summary>Prior Things</summary>
        <section id="data_warning" class="warning">
          <p>A one-time warning on where your prior things are stored:</p>
          <p>Three Things runs entirely in your Web browser; it transfers no data to any servers.</p>
          <p>This means that all your prior things are saved right in your browser — and nowhere else!</p>
          <p>So if your browser gets reset, or if your device is lost, or your drive dies, then all your prior things will be <strong>gone</strong>.</p>
          <p>A backup/export feature <a href="data.html">exists</a>, but you’ll have to remember to use it periodically to save your prior things somewhere else, or you might lose them.</p>
          <p>Consider yourself warned!</p>
          <button id="button_dismiss_data_warning">OK, I get it</button>
        </section>
        <details>
            <summary>28 April 2014</summary>
            ...
        </details>

        <details>
            <summary>27 April 2014</summary>
            ...
        </details>
      </details>
    </main>

    <footer>
      <nav>
        <ul>
          <li><a href="help.html">Help</a></li>
          <li><a href="data.html">Data</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="feedback.html">Feedback</a></li>
          <li><a href="colophon.html">Colophon</a></li>
        </ul>
      </nav>
    </footer>

  </body>
</html>
